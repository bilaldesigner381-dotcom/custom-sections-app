{% assign template = template.name %}

{% assign show_block = false %}
{% case block.settings.visibility %}
  {% when 'all' %}
    {% assign show_block = true %}
  {% when 'home' %}
    {% if template == 'index' %}{% assign show_block = true %}{% endif %}
  {% when 'product' %}
    {% if template contains 'product' %}{% assign show_block = true %}{% endif %}
  {% when 'collection' %}
    {% if template contains 'collection' %}{% assign show_block = true %}{% endif %}
  {% when 'page' %}
    {% if template contains 'page' %}{% assign show_block = true %}{% endif %}
{% endcase %}

{% if show_block %}
<div class="newsletter-section" style="background: {{ block.settings.bg_color }}; padding: {{ block.settings.section_padding }}px 0;">
  <div class="newsletter-container">

    {% if block.settings.heading != blank %}
      <h2 class="newsletter-heading">{{ block.settings.heading }}</h2>
    {% endif %}

    {% if block.settings.subheading != blank %}
      <p class="newsletter-subheading">{{ block.settings.subheading }}</p>
    {% endif %}

    {% if block.settings.incentive_text != blank %}
      <p class="newsletter-incentive">{{ block.settings.incentive_text }}</p>
    {% endif %}

    <form method="post" action="/contact#newsletter" class="newsletter-form">
      <input type="hidden" name="form_type" value="customer">
      <input type="hidden" name="utf8" value="âœ“">
      <input type="hidden" name="contact[tags]" value="newsletter">

      <input type="email" name="contact[email]" class="newsletter-input" placeholder="{{ block.settings.placeholder_text }}" required>
      <button type="submit" class="newsletter-btn"
        style="background: {{ block.settings.button_bg_color }}; color: {{ block.settings.button_text_color }};">
        {{ block.settings.button_text }}
      </button>
    </form>

  </div>
</div>
{% endif %}

<style>
.newsletter-container {
  max-width: 700px;
  margin: 0 auto;
  text-align: center;
  padding: 0 20px;
}
.newsletter-heading {
  font-size: 28px;
  font-weight: bold;
  margin-bottom: 10px;
}
.newsletter-subheading {
  font-size: 16px;
  margin-bottom: 10px;
  color: #555;
}
.newsletter-incentive {
  font-size: 15px;
  margin-bottom: 20px;
  font-weight: 600;
  color: #e63946;
}
.newsletter-form {
  display: flex;
  gap: 10px;
  justify-content: center;
  flex-wrap: wrap;
}
.newsletter-input {
  flex: 1;
  min-width: 250px;
  padding: 12px;
  border: 2px solid #ddd;
  border-radius: 8px;
}
.newsletter-btn {
  padding: 12px 24px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: bold;
}
.newsletter-btn:hover {
  opacity: 0.9;
}
@media (max-width: 600px) {
  .newsletter-form { flex-direction: column; }
  .newsletter-input, .newsletter-btn { width: 100%; }
}
</style>

{% schema %}
{
  "name": "Newsletter Signup",
  "target": "section",
  "settings": [
    {
      "type": "select",
      "id": "visibility",
      "label": "Show this block on",
      "options": [
        { "value": "all", "label": "All pages" },
        { "value": "home", "label": "Homepage only" },
        { "value": "product", "label": "Product pages only" },
        { "value": "collection", "label": "Collection pages only" },
        { "value": "page", "label": "Custom pages only" }
      ],
      "default": "page"
    },
    { "type": "text", "id": "heading", "label": "Heading", "default": "Join Our Newsletter" },
    { "type": "text", "id": "subheading", "label": "Subheading", "default": "Get updates, special deals & more." },
    { "type": "text", "id": "incentive_text", "label": "Incentive Text", "default": "Sign up and get 10% OFF your first order!" },
    { "type": "text", "id": "placeholder_text", "label": "Email Placeholder", "default": "Enter your email" },
    { "type": "text", "id": "button_text", "label": "Button Text", "default": "Subscribe" },
    { "type": "color", "id": "button_bg_color", "label": "Button Background Color", "default": "#ff5f6d" },
    { "type": "color", "id": "button_text_color", "label": "Button Text Color", "default": "#ffffff" },
    { "type": "color", "id": "bg_color", "label": "Background Color", "default": "#f9f9f9" },
    { "type": "range", "id": "section_padding", "min": 0, "max": 100, "step": 5, "default": 40, "label": "Section Padding" }
  ]
}
{% endschema %}







